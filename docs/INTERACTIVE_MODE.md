# 対話式メモ機能 (Interactive Mode)

## 概要

`jinfo` (引数なし) は、段階的にメモタイプ、プロジェクト、メモ内容を選択・入力できる対話式メモ追加機能です。これがjinfoのデフォルト動作になりました。

## 特徴

- **段階的入力**: メモタイプ選択 → プロジェクト選択 → メモ内容入力の順で進行
- **プロジェクト選択**: 設定済みのプロジェクトから選択可能
- **バリデーション**: メモ内容の必須チェック
- **視覚的フィードバック**: 選択肢の説明とパス表示
- **デフォルト値**: 現在のデフォルトプロジェクトが初期選択

## 使用方法

### 基本的な使用
```bash
# 対話式メモ追加（デフォルト動作）
jinfo
```

### 実行フロー

#### 1. メモタイプ選択
```
? メモのタイプを選択してください: (Use arrow keys)
❯ 📝 メモ - 一般的なメモや記録
  ✅ タスク - やるべきことや作業項目
  💡 アイデア - 新しい発想やひらめき
  🤝 会議 - 会議の議事録や内容
  📚 学習 - 学んだことや気づき
```

- 矢印キーで選択
- Enter で決定
- 「メモ」がデフォルト選択

#### 2. プロジェクト選択
```
? プロジェクトを選択してください: (Use arrow keys)
❯ default - デフォルトプロジェクト
  work - 仕事用メモ  
  personal - 個人用メモ
  study - 学習記録
```

- 矢印キーで選択
- Enter で決定
- デフォルトプロジェクトが初期選択されている

#### 3. メモ内容入力
```
? メモ内容を入力してください: [カーソルが点滅]
```

- テキスト入力が可能
- 空白のみの入力は拒否される
- バリデーションエラーが表示される場合がある

#### 4. 保存完了
```
✅ メモを追加しました (タイプ: タスク, プロジェクト: work)
```

## 使用場面

### じっくり考えてメモを作成したい場合
```bash
jinfo
# メモタイプとプロジェクトを選んでから、詳細なメモを作成
```

### プロジェクトを確認してからメモしたい場合
```bash
jinfo
# 利用可能なプロジェクト一覧を確認してから適切なプロジェクトを選択
```

### 長いメモを作成する場合
```bash
jinfo
# コマンドライン引数では入力しにくい長いメモを対話形式で入力
```

## 従来の方法との比較

### コマンドライン引数方式
```bash
jinfo --project work "会議のメモ #会議 #重要"
```
- **メリット**: 高速、スクリプト化可能
- **デメリット**: プロジェクト名を覚えている必要がある

### シンプルモード（従来のインタラクティブ動作）
```bash
jinfo --simple
# Please add memo: [入力]
```
- **メリット**: 素早くメモ内容のみ入力
- **デメリット**: プロジェクト選択ができない（デフォルトプロジェクトのみ）
- **デメリット**: セマンティック分類なし

### 対話式メモ機能（NEW・デフォルト動作）
```bash
jinfo
```
- **メリット**: メモタイプ + プロジェクト選択 + メモ内容入力の全てが対話的
- **メリット**: セマンティックな構造化メモが作成可能
- **メリット**: プロジェクト一覧を確認してから選択可能
- **メリット**: バリデーション機能付き

## 実践例

### 日常的な使用
```bash
# 朝の計画立て
jinfo
# タイプ: タスク(✅) を選択
# プロジェクト: work を選択
# メモ: 今日のタスク: コードレビュー、機能実装、会議参加 #予定

# 学習記録
jinfo
# タイプ: 学習(📚) を選択
# プロジェクト: study を選択
# メモ: TypeScriptのジェネリクスについて学習。コードの再利用性が向上 #学習 #TypeScript
```

### プロジェクト横断的な作業
```bash
# どのプロジェクトに記録するか迷う場合
jinfo
# メモタイプとプロジェクト一覧を見てから適切なプロジェクトを選択
# 例: 複数プロジェクトに関わるアイデアを personal に記録
```

### 詳細なメモの作成
```bash
jinfo
# 長い会議の議事録を段階的に入力
# メモタイプ（会議）、プロジェクト、内容を順次選択して整理された形で記録
```

## エラーハンドリング

### 空のメモ内容
```
? メモ内容を入力してください: [空白のみ入力]
✗ メモ内容は必須です
? メモ内容を入力してください: [再入力]
```

### プロジェクトが見つからない場合
```
✗ エラーが発生しました: プロジェクト 'xxx' が見つかりません
```

### 権限エラー
```
✗ エラーが発生しました: ディレクトリへの書き込み権限がありません
```

## 設定への影響

対話式メモ機能は既存の設定を利用します：

- `~/.jinfo/config.json` のプロジェクト一覧から選択肢を生成
- `defaultProject` が初期選択項目として使用
- 各プロジェクトの `description` が選択画面に表示

## まとめ

対話式メモ機能は、以下の状況で特に有効です：

1. **プロジェクト選択を慎重に行いたい場合**
2. **長いメモを入力したい場合**
3. **利用可能なプロジェクトを確認したい場合**
4. **GUI的な操作感でメモを作成したい場合**

従来のコマンドライン方式と組み合わせて使用することで、様々な状況に対応した効率的なメモ管理が可能になります。

## 後方互換性

既存の `jinfo interactive` コマンドも引き続き利用可能ですが、非推奨となりました：

```bash
# 非推奨（警告が表示されます）
jinfo interactive

# 推奨（デフォルト動作）
jinfo
```

従来のシンプルなメモ入力は `--simple` オプションで利用できます：

```bash
# 従来のインタラクティブ動作
jinfo --simple
```